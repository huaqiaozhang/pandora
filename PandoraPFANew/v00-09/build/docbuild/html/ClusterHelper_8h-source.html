<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PandoraPFANew: ClusterHelper.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<h1>ClusterHelper.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00008"></a>00008 <span class="preprocessor">#ifndef CLUSTER_HELPER_H</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span><span class="preprocessor">#define CLUSTER_HELPER_H 1</span>
<a name="l00010"></a>00010 <span class="preprocessor"></span>
<a name="l00011"></a>00011 <span class="preprocessor">#include "Pandora/PandoraInputTypes.h"</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include "Pandora/PandoraInternal.h"</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="keyword">namespace </span>pandora
<a name="l00015"></a>00015 {
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="keyword">class </span>TiXmlHandle;
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00020"></a>00020 
<a name="l00024"></a><a class="code" href="classpandora_1_1ClusterHelper.html">00024</a> <span class="keyword">class </span><a class="code" href="classpandora_1_1ClusterHelper.html">ClusterHelper</a>
<a name="l00025"></a>00025 {
<a name="l00026"></a>00026 <span class="keyword">public</span>:
<a name="l00030"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html">00030</a>     <span class="keyword">class </span><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html">ClusterFitPoint</a>
<a name="l00031"></a>00031     {
<a name="l00032"></a>00032     <span class="keyword">public</span>:
<a name="l00038"></a>00038         <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#82a456ddb021eea12b84305d91ca0a75">ClusterFitPoint</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1CaloHit.html">CaloHit</a> *<span class="keyword">const</span> pCaloHit);
<a name="l00039"></a>00039 
<a name="l00049"></a>00049         <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#82a456ddb021eea12b84305d91ca0a75">ClusterFitPoint</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;position, <span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;cellNormalVector, <span class="keyword">const</span> <span class="keywordtype">float</span> cellSize,
<a name="l00050"></a>00050             <span class="keyword">const</span> <span class="keywordtype">float</span> energy, <span class="keyword">const</span> PseudoLayer pseudoLayer);
<a name="l00051"></a>00051 
<a name="l00057"></a>00057         <span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;<a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#39ec20d2f30bd114248bf9f29980c372">GetPosition</a>() <span class="keyword">const</span>;
<a name="l00058"></a>00058 
<a name="l00064"></a>00064         <span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;<a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#d89b902ada25177df89e4a4f97550ccb">GetCellNormalVector</a>() <span class="keyword">const</span>;
<a name="l00065"></a>00065 
<a name="l00071"></a>00071         <span class="keywordtype">float</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#23ebb11b68774f13f431d72b70f58ec1">GetCellSize</a>() <span class="keyword">const</span>;
<a name="l00072"></a>00072 
<a name="l00078"></a>00078         <span class="keywordtype">float</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#38f53e38c3c508674b6005ef820d8f6c">GetEnergy</a>() <span class="keyword">const</span>;
<a name="l00079"></a>00079 
<a name="l00085"></a>00085         PseudoLayer <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#1c32c2a91254069cca6325a5467572b1">GetPseudoLayer</a>() <span class="keyword">const</span>;
<a name="l00086"></a>00086 
<a name="l00087"></a>00087     <span class="keyword">private</span>:
<a name="l00088"></a>00088         <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a>         m_position;              
<a name="l00089"></a>00089         <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a>         m_cellNormalVector;      
<a name="l00090"></a>00090         <span class="keywordtype">float</span>                   m_cellSize;              
<a name="l00091"></a>00091         <span class="keywordtype">float</span>                   m_energy;                
<a name="l00092"></a>00092         PseudoLayer             m_pseudoLayer;           
<a name="l00093"></a>00093     };
<a name="l00094"></a>00094 
<a name="l00095"></a>00095     <span class="keyword">typedef</span> std::vector&lt;ClusterFitPoint&gt; ClusterFitPointList;
<a name="l00096"></a>00096 
<a name="l00100"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html">00100</a>     <span class="keyword">class </span><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html">ClusterFitResult</a>
<a name="l00101"></a>00101     {
<a name="l00102"></a>00102     <span class="keyword">public</span>:
<a name="l00106"></a>00106         <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#8256bad988c55ae9b7fb5928d5056c27">ClusterFitResult</a>();
<a name="l00107"></a>00107 
<a name="l00113"></a>00113         <span class="keywordtype">bool</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#268378a86ffe8dc9008eb5501ec7a03a">IsFitSuccessful</a>() <span class="keyword">const</span>;
<a name="l00114"></a>00114 
<a name="l00120"></a>00120         <span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;<a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#d6eb869839db6fc3a4f9db8d2cd96e0c">GetDirection</a>() <span class="keyword">const</span>;
<a name="l00121"></a>00121 
<a name="l00127"></a>00127         <span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;<a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#9d0aec5c0803212ef7ecc2e978f5d3a6">GetIntercept</a>() <span class="keyword">const</span>;
<a name="l00128"></a>00128 
<a name="l00134"></a>00134         <span class="keywordtype">float</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#4ad9c5fea9b5ccfbdcd30dc58cdc9289">GetChi2</a>() <span class="keyword">const</span>;
<a name="l00135"></a>00135 
<a name="l00141"></a>00141         <span class="keywordtype">float</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#4970950e02eac953533ab26304407217">GetRms</a>() <span class="keyword">const</span>;
<a name="l00142"></a>00142 
<a name="l00148"></a>00148         <span class="keywordtype">float</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#6937844506c1f0f8f04886ae59d11fe8">GetRadialDirectionCosine</a>() <span class="keyword">const</span>;
<a name="l00149"></a>00149 
<a name="l00155"></a>00155         <span class="keywordtype">void</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#3e15cbb0ed2f1eb795dfa7631cf75a68">SetSuccessFlag</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> successFlag);
<a name="l00156"></a>00156 
<a name="l00162"></a>00162         <span class="keywordtype">void</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#4c8dd0b18bf5966f29a9d1fdc775b922">SetDirection</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;direction);
<a name="l00163"></a>00163 
<a name="l00169"></a>00169         <span class="keywordtype">void</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#97e728cb6fd53000f936c1e46e85696d">SetIntercept</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;intercept);
<a name="l00170"></a>00170 
<a name="l00176"></a>00176         <span class="keywordtype">void</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#fa74289dd22e1dbc43d15fefcc2f79f0">SetChi2</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> chi2);
<a name="l00177"></a>00177 
<a name="l00183"></a>00183         <span class="keywordtype">void</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#3c2a359f17ab7640dae69d266d391a36">SetRms</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> rms);
<a name="l00184"></a>00184 
<a name="l00190"></a>00190         <span class="keywordtype">void</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#555028f9f347e407bdbb6fae67babc89">SetRadialDirectionCosine</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> radialDirectionCosine);
<a name="l00191"></a>00191 
<a name="l00195"></a>00195         <span class="keywordtype">void</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#6509415dd96f5d35de6e864597722be7">Reset</a>();
<a name="l00196"></a>00196 
<a name="l00197"></a>00197     <span class="keyword">private</span>:
<a name="l00198"></a>00198         <span class="keywordtype">bool</span>                    m_isFitSuccessful;       
<a name="l00199"></a>00199         <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a>         m_direction;             
<a name="l00200"></a>00200         <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a>         m_intercept;             
<a name="l00201"></a>00201         <a class="code" href="classpandora_1_1PandoraInputType.html">InputFloat</a>              m_chi2;                  
<a name="l00202"></a>00202         <a class="code" href="classpandora_1_1PandoraInputType.html">InputFloat</a>              m_rms;                   
<a name="l00203"></a>00203         <a class="code" href="classpandora_1_1PandoraInputType.html">InputFloat</a>              m_dirCosR;               
<a name="l00204"></a>00204     };
<a name="l00205"></a>00205 
<a name="l00213"></a>00213     <span class="keyword">static</span> StatusCode <a class="code" href="classpandora_1_1ClusterHelper.html#67c2273d704966c0e2d5e2c6d8650625">FitStart</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pCluster, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxOccupiedLayers, <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html">ClusterFitResult</a> &amp;clusterFitResult);
<a name="l00214"></a>00214 
<a name="l00222"></a>00222     <span class="keyword">static</span> StatusCode <a class="code" href="classpandora_1_1ClusterHelper.html#377cdf62b87a32b8eda85dfc7018fa09">FitEnd</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pCluster, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxOccupiedLayers, <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html">ClusterFitResult</a> &amp;clusterFitResult);
<a name="l00223"></a>00223 
<a name="l00230"></a>00230     <span class="keyword">static</span> StatusCode <a class="code" href="classpandora_1_1ClusterHelper.html#a5a3b4625691d7ba5cddbe34f7e58c6f">FitFullCluster</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pCluster, <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html">ClusterFitResult</a> &amp;clusterFitResult);
<a name="l00231"></a>00231 
<a name="l00240"></a>00240     <span class="keyword">static</span> StatusCode <a class="code" href="classpandora_1_1ClusterHelper.html#9bc84eaa3134a9437fee079e5653b13e">FitLayers</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pCluster, <span class="keyword">const</span> PseudoLayer startLayer, <span class="keyword">const</span> PseudoLayer endLayer,
<a name="l00241"></a>00241         <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html">ClusterFitResult</a> &amp;clusterFitResult);
<a name="l00242"></a>00242 
<a name="l00251"></a>00251     <span class="keyword">static</span> StatusCode <a class="code" href="classpandora_1_1ClusterHelper.html#d9b8802f60ab66817dc7a5cdd89c5435">FitLayerCentroids</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pCluster, <span class="keyword">const</span> PseudoLayer startLayer, <span class="keyword">const</span> PseudoLayer endLayer,
<a name="l00252"></a>00252         <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html">ClusterFitResult</a> &amp;clusterFitResult);
<a name="l00253"></a>00253 
<a name="l00260"></a>00260     <span class="keyword">static</span> StatusCode <a class="code" href="classpandora_1_1ClusterHelper.html#ee944d55d9ddbb3c8000d582a6578b10">FitPoints</a>(<span class="keyword">const</span> ClusterFitPointList &amp;clusterFitPointList, <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html">ClusterFitResult</a> &amp;clusterFitResult);
<a name="l00261"></a>00261 
<a name="l00269"></a>00269     <span class="keyword">static</span> StatusCode <a class="code" href="classpandora_1_1ClusterHelper.html#b865b32bf8588d59507449646080ce3f">GetFitResultsClosestApproach</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html">ClusterFitResult</a> &amp;lhs, <span class="keyword">const</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html">ClusterFitResult</a> &amp;rhs, <span class="keywordtype">float</span> &amp;closestApproach);
<a name="l00270"></a>00270 
<a name="l00281"></a>00281     <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="classpandora_1_1ClusterHelper.html#7adba1f30043b6bcc7219e8c83cbb6ae">GetDistanceToClosestHit</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html">ClusterFitResult</a> &amp;clusterFitResult, <span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pCluster,
<a name="l00282"></a>00282         <span class="keyword">const</span> PseudoLayer startLayer, <span class="keyword">const</span> PseudoLayer endLayer);
<a name="l00283"></a>00283 
<a name="l00292"></a>00292     <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="classpandora_1_1ClusterHelper.html#7adba1f30043b6bcc7219e8c83cbb6ae">GetDistanceToClosestHit</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pClusterI, <span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pClusterJ);
<a name="l00293"></a>00293 
<a name="l00304"></a>00304     <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="classpandora_1_1ClusterHelper.html#24735ab0db6e069d3e3403d1b0f12766">GetDistanceToClosestCentroid</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html">ClusterFitResult</a> &amp;clusterFitResult, <span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pCluster,
<a name="l00305"></a>00305         <span class="keyword">const</span> PseudoLayer startLayer, <span class="keyword">const</span> PseudoLayer endLayer);
<a name="l00306"></a>00306 
<a name="l00314"></a>00314     <span class="keyword">static</span> StatusCode <a class="code" href="classpandora_1_1ClusterHelper.html#24735ab0db6e069d3e3403d1b0f12766">GetDistanceToClosestCentroid</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pClusterI, <span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pClusterJ, <span class="keywordtype">float</span> &amp;centroidDistance);
<a name="l00315"></a>00315 
<a name="l00323"></a>00323     <span class="keyword">static</span> StatusCode <a class="code" href="classpandora_1_1ClusterHelper.html#3ef92df51b4328e3cec7e2c3e85f7ad5">GetClosestIntraLayerDistance</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pClusterI, <span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pClusterJ, <span class="keywordtype">float</span> &amp;intraLayerDistance);
<a name="l00324"></a>00324 
<a name="l00335"></a>00335     <span class="keyword">static</span> StatusCode <a class="code" href="classpandora_1_1ClusterHelper.html#bc2c040986f937b4e1a125aed27215ca">GetTrackClusterDistance</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1Track.html">Track</a> *<span class="keyword">const</span> pTrack, <span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pCluster, <span class="keyword">const</span> PseudoLayer maxSearchLayer,
<a name="l00336"></a>00336         <span class="keyword">const</span> <span class="keywordtype">float</span> parallelDistanceCut, <span class="keywordtype">float</span> &amp;trackClusterDistance);
<a name="l00337"></a>00337 
<a name="l00348"></a>00348     <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classpandora_1_1ClusterHelper.html#ea06aec5b31ce507571c668fdbff4929">CanMergeCluster</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pCluster, <span class="keyword">const</span> <span class="keywordtype">float</span> minMipFraction, <span class="keyword">const</span> <span class="keywordtype">float</span> maxAllHitsFitRms);
<a name="l00349"></a>00349 
<a name="l00358"></a>00358     <span class="keyword">static</span> PseudoLayer <a class="code" href="classpandora_1_1ClusterHelper.html#8f9f58e33cbb33519130894045ff7265">GetShowerStartLayer</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pCluster);
<a name="l00359"></a>00359 
<a name="l00367"></a>00367     <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="classpandora_1_1ClusterHelper.html#080391a223ff215c021a3073981ab445">GetEnergyWeightedMeanTime</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pCluster);
<a name="l00368"></a>00368 
<a name="l00376"></a>00376     <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classpandora_1_1ClusterHelper.html#aabf2525da2d5a8bd0ad85efd5c99233">IsClusterLeavingDetector</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pCluster);
<a name="l00377"></a>00377 
<a name="l00389"></a>00389     <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classpandora_1_1ClusterHelper.html#e722ccfa578534f3894d1579912cdd03">DoesClusterCrossGapRegion</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1Cluster.html">Cluster</a> *<span class="keyword">const</span> pCluster, <span class="keyword">const</span> PseudoLayer startLayer, <span class="keyword">const</span> PseudoLayer endLayer,
<a name="l00390"></a>00390         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nSamplingPoints = 50);
<a name="l00391"></a>00391 
<a name="l00404"></a>00404     <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classpandora_1_1ClusterHelper.html#ba9f6b93b55987d429949a04e9f4b0f5">DoesFitCrossGapRegion</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html">ClusterFitResult</a> &amp;clusterFitResult, <span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;startPosition,
<a name="l00405"></a>00405         <span class="keyword">const</span> <span class="keywordtype">float</span> propagationDistance, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nSamplingPoints = 50);
<a name="l00406"></a>00406 
<a name="l00407"></a>00407 <span class="keyword">private</span>:
<a name="l00416"></a>00416     <span class="keyword">static</span> StatusCode PerformLinearFit(<span class="keyword">const</span> ClusterFitPointList &amp;clusterFitPointList, <span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;centralPosition,
<a name="l00417"></a>00417         <span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;centralDirection, <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html">ClusterFitResult</a> &amp;clusterFitResult);
<a name="l00418"></a>00418 
<a name="l00424"></a>00424     <span class="keyword">static</span> StatusCode ReadSettings(<span class="keyword">const</span> <a class="code" href="classpandora_1_1TiXmlHandle.html">TiXmlHandle</a> *<span class="keyword">const</span> pXmlHandle);
<a name="l00425"></a>00425 
<a name="l00426"></a>00426     <span class="keyword">static</span> <span class="keywordtype">float</span>        m_minTrackClusterCosAngle;              
<a name="l00427"></a>00427     <span class="keyword">static</span> <span class="keywordtype">float</span>        m_showerStartMipFraction;               
<a name="l00428"></a>00428     <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> m_showerStartNonMipLayers;              
<a name="l00429"></a>00429 
<a name="l00430"></a>00430     <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> m_leavingNOuterLayersToExamine;         
<a name="l00431"></a>00431     <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> m_leavingMipLikeNOccupiedLayers;        
<a name="l00432"></a>00432     <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> m_leavingShowerLikeNOccupiedLayers;     
<a name="l00433"></a>00433     <span class="keyword">static</span> <span class="keywordtype">float</span>        m_leavingShowerLikeEnergyInOuterLayers; 
<a name="l00434"></a>00434 
<a name="l00435"></a>00435     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classpandora_1_1PandoraSettings.html">PandoraSettings</a>;
<a name="l00436"></a>00436 };
<a name="l00437"></a>00437 
<a name="l00438"></a>00438 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00439"></a>00439 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00440"></a>00440 
<a name="l00441"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#39ec20d2f30bd114248bf9f29980c372">00441</a> <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;<a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#39ec20d2f30bd114248bf9f29980c372">ClusterHelper::ClusterFitPoint::GetPosition</a>()<span class="keyword"> const</span>
<a name="l00442"></a>00442 <span class="keyword"></span>{
<a name="l00443"></a>00443     <span class="keywordflow">return</span> m_position;
<a name="l00444"></a>00444 }
<a name="l00445"></a>00445 
<a name="l00446"></a>00446 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00447"></a>00447 
<a name="l00448"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#d89b902ada25177df89e4a4f97550ccb">00448</a> <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;<a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#d89b902ada25177df89e4a4f97550ccb">ClusterHelper::ClusterFitPoint::GetCellNormalVector</a>()<span class="keyword"> const</span>
<a name="l00449"></a>00449 <span class="keyword"></span>{
<a name="l00450"></a>00450     <span class="keywordflow">return</span> m_cellNormalVector;
<a name="l00451"></a>00451 }
<a name="l00452"></a>00452 
<a name="l00453"></a>00453 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00454"></a>00454 
<a name="l00455"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#23ebb11b68774f13f431d72b70f58ec1">00455</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#23ebb11b68774f13f431d72b70f58ec1">ClusterHelper::ClusterFitPoint::GetCellSize</a>()<span class="keyword"> const</span>
<a name="l00456"></a>00456 <span class="keyword"></span>{
<a name="l00457"></a>00457     <span class="keywordflow">return</span> m_cellSize;
<a name="l00458"></a>00458 }
<a name="l00459"></a>00459 
<a name="l00460"></a>00460 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00461"></a>00461 
<a name="l00462"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#38f53e38c3c508674b6005ef820d8f6c">00462</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#38f53e38c3c508674b6005ef820d8f6c">ClusterHelper::ClusterFitPoint::GetEnergy</a>()<span class="keyword"> const</span>
<a name="l00463"></a>00463 <span class="keyword"></span>{
<a name="l00464"></a>00464     <span class="keywordflow">return</span> m_energy;
<a name="l00465"></a>00465 }
<a name="l00466"></a>00466 
<a name="l00467"></a>00467 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00468"></a>00468 
<a name="l00469"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#1c32c2a91254069cca6325a5467572b1">00469</a> <span class="keyword">inline</span> PseudoLayer <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitPoint.html#1c32c2a91254069cca6325a5467572b1">ClusterHelper::ClusterFitPoint::GetPseudoLayer</a>()<span class="keyword"> const</span>
<a name="l00470"></a>00470 <span class="keyword"></span>{
<a name="l00471"></a>00471     <span class="keywordflow">return</span> m_pseudoLayer;
<a name="l00472"></a>00472 }
<a name="l00473"></a>00473 
<a name="l00474"></a>00474 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00475"></a>00475 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00476"></a>00476 
<a name="l00477"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#8256bad988c55ae9b7fb5928d5056c27">00477</a> <span class="keyword">inline</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#8256bad988c55ae9b7fb5928d5056c27">ClusterHelper::ClusterFitResult::ClusterFitResult</a>() :
<a name="l00478"></a>00478     m_isFitSuccessful(false),
<a name="l00479"></a>00479     m_direction(0.f, 0.f, 0.f),
<a name="l00480"></a>00480     m_intercept(0.f, 0.f, 0.f)
<a name="l00481"></a>00481 {
<a name="l00482"></a>00482 }
<a name="l00483"></a>00483 
<a name="l00484"></a>00484 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00485"></a>00485 
<a name="l00486"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#268378a86ffe8dc9008eb5501ec7a03a">00486</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#268378a86ffe8dc9008eb5501ec7a03a">ClusterHelper::ClusterFitResult::IsFitSuccessful</a>()<span class="keyword"> const</span>
<a name="l00487"></a>00487 <span class="keyword"></span>{
<a name="l00488"></a>00488     <span class="keywordflow">return</span> m_isFitSuccessful;
<a name="l00489"></a>00489 }
<a name="l00490"></a>00490 
<a name="l00491"></a>00491 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00492"></a>00492 
<a name="l00493"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#d6eb869839db6fc3a4f9db8d2cd96e0c">00493</a> <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;<a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#d6eb869839db6fc3a4f9db8d2cd96e0c">ClusterHelper::ClusterFitResult::GetDirection</a>()<span class="keyword"> const</span>
<a name="l00494"></a>00494 <span class="keyword"></span>{
<a name="l00495"></a>00495     <span class="keywordflow">if</span> (!m_isFitSuccessful)
<a name="l00496"></a>00496         <span class="keywordflow">throw</span> <a class="code" href="classpandora_1_1StatusCodeException.html">StatusCodeException</a>(STATUS_CODE_NOT_INITIALIZED);
<a name="l00497"></a>00497 
<a name="l00498"></a>00498     <span class="keywordflow">return</span> m_direction;
<a name="l00499"></a>00499 }
<a name="l00500"></a>00500 
<a name="l00501"></a>00501 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00502"></a>00502 
<a name="l00503"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#9d0aec5c0803212ef7ecc2e978f5d3a6">00503</a> <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;<a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#9d0aec5c0803212ef7ecc2e978f5d3a6">ClusterHelper::ClusterFitResult::GetIntercept</a>()<span class="keyword"> const</span>
<a name="l00504"></a>00504 <span class="keyword"></span>{
<a name="l00505"></a>00505     <span class="keywordflow">if</span> (!m_isFitSuccessful)
<a name="l00506"></a>00506         <span class="keywordflow">throw</span> <a class="code" href="classpandora_1_1StatusCodeException.html">StatusCodeException</a>(STATUS_CODE_NOT_INITIALIZED);
<a name="l00507"></a>00507 
<a name="l00508"></a>00508     <span class="keywordflow">return</span> m_intercept;
<a name="l00509"></a>00509 }
<a name="l00510"></a>00510 
<a name="l00511"></a>00511 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00512"></a>00512 
<a name="l00513"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#4ad9c5fea9b5ccfbdcd30dc58cdc9289">00513</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#4ad9c5fea9b5ccfbdcd30dc58cdc9289">ClusterHelper::ClusterFitResult::GetChi2</a>()<span class="keyword"> const</span>
<a name="l00514"></a>00514 <span class="keyword"></span>{
<a name="l00515"></a>00515     <span class="keywordflow">if</span> (!m_isFitSuccessful)
<a name="l00516"></a>00516         <span class="keywordflow">throw</span> <a class="code" href="classpandora_1_1StatusCodeException.html">StatusCodeException</a>(STATUS_CODE_NOT_INITIALIZED);
<a name="l00517"></a>00517 
<a name="l00518"></a>00518     <span class="keywordflow">return</span> m_chi2.<a class="code" href="classpandora_1_1PandoraInputType.html#6cdc85cefc1803578a9f5b146e0320d2">Get</a>();
<a name="l00519"></a>00519 }
<a name="l00520"></a>00520 
<a name="l00521"></a>00521 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00522"></a>00522 
<a name="l00523"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#4970950e02eac953533ab26304407217">00523</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#4970950e02eac953533ab26304407217">ClusterHelper::ClusterFitResult::GetRms</a>()<span class="keyword"> const</span>
<a name="l00524"></a>00524 <span class="keyword"></span>{
<a name="l00525"></a>00525     <span class="keywordflow">if</span> (!m_isFitSuccessful)
<a name="l00526"></a>00526         <span class="keywordflow">throw</span> <a class="code" href="classpandora_1_1StatusCodeException.html">StatusCodeException</a>(STATUS_CODE_NOT_INITIALIZED);
<a name="l00527"></a>00527 
<a name="l00528"></a>00528     <span class="keywordflow">return</span> m_rms.<a class="code" href="classpandora_1_1PandoraInputType.html#6cdc85cefc1803578a9f5b146e0320d2">Get</a>();
<a name="l00529"></a>00529 }
<a name="l00530"></a>00530 
<a name="l00531"></a>00531 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00532"></a>00532 
<a name="l00533"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#6937844506c1f0f8f04886ae59d11fe8">00533</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#6937844506c1f0f8f04886ae59d11fe8">ClusterHelper::ClusterFitResult::GetRadialDirectionCosine</a>()<span class="keyword"> const</span>
<a name="l00534"></a>00534 <span class="keyword"></span>{
<a name="l00535"></a>00535     <span class="keywordflow">if</span> (!m_isFitSuccessful)
<a name="l00536"></a>00536         <span class="keywordflow">throw</span> <a class="code" href="classpandora_1_1StatusCodeException.html">StatusCodeException</a>(STATUS_CODE_NOT_INITIALIZED);
<a name="l00537"></a>00537 
<a name="l00538"></a>00538     <span class="keywordflow">return</span> m_dirCosR.<a class="code" href="classpandora_1_1PandoraInputType.html#6cdc85cefc1803578a9f5b146e0320d2">Get</a>();
<a name="l00539"></a>00539 }
<a name="l00540"></a>00540 
<a name="l00541"></a>00541 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00542"></a>00542 
<a name="l00543"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#3e15cbb0ed2f1eb795dfa7631cf75a68">00543</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#3e15cbb0ed2f1eb795dfa7631cf75a68">ClusterHelper::ClusterFitResult::SetSuccessFlag</a>(<span class="keywordtype">bool</span> successFlag)
<a name="l00544"></a>00544 {
<a name="l00545"></a>00545     m_isFitSuccessful = successFlag;
<a name="l00546"></a>00546 }
<a name="l00547"></a>00547 
<a name="l00548"></a>00548 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00549"></a>00549 
<a name="l00550"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#4c8dd0b18bf5966f29a9d1fdc775b922">00550</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#4c8dd0b18bf5966f29a9d1fdc775b922">ClusterHelper::ClusterFitResult::SetDirection</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;direction)
<a name="l00551"></a>00551 {
<a name="l00552"></a>00552     m_direction = direction;
<a name="l00553"></a>00553 }
<a name="l00554"></a>00554 
<a name="l00555"></a>00555 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00556"></a>00556 
<a name="l00557"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#97e728cb6fd53000f936c1e46e85696d">00557</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#97e728cb6fd53000f936c1e46e85696d">ClusterHelper::ClusterFitResult::SetIntercept</a>(<span class="keyword">const</span> <a class="code" href="classpandora_1_1CartesianVector.html">CartesianVector</a> &amp;intercept)
<a name="l00558"></a>00558 {
<a name="l00559"></a>00559     m_intercept = intercept;
<a name="l00560"></a>00560 }
<a name="l00561"></a>00561 
<a name="l00562"></a>00562 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00563"></a>00563 
<a name="l00564"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#fa74289dd22e1dbc43d15fefcc2f79f0">00564</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#fa74289dd22e1dbc43d15fefcc2f79f0">ClusterHelper::ClusterFitResult::SetChi2</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> chi2)
<a name="l00565"></a>00565 {
<a name="l00566"></a>00566     <span class="keywordflow">if</span> (!(m_chi2 = chi2))
<a name="l00567"></a>00567         <span class="keywordflow">throw</span> <a class="code" href="classpandora_1_1StatusCodeException.html">StatusCodeException</a>(STATUS_CODE_INVALID_PARAMETER);
<a name="l00568"></a>00568 }
<a name="l00569"></a>00569 
<a name="l00570"></a>00570 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00571"></a>00571 
<a name="l00572"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#3c2a359f17ab7640dae69d266d391a36">00572</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#3c2a359f17ab7640dae69d266d391a36">ClusterHelper::ClusterFitResult::SetRms</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> rms)
<a name="l00573"></a>00573 {
<a name="l00574"></a>00574     <span class="keywordflow">if</span> (!(m_rms = rms))
<a name="l00575"></a>00575         <span class="keywordflow">throw</span> <a class="code" href="classpandora_1_1StatusCodeException.html">StatusCodeException</a>(STATUS_CODE_INVALID_PARAMETER);
<a name="l00576"></a>00576 }
<a name="l00577"></a>00577 
<a name="l00578"></a>00578 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00579"></a>00579 
<a name="l00580"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#555028f9f347e407bdbb6fae67babc89">00580</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#555028f9f347e407bdbb6fae67babc89">ClusterHelper::ClusterFitResult::SetRadialDirectionCosine</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> radialDirectionCosine)
<a name="l00581"></a>00581 {
<a name="l00582"></a>00582     <span class="keywordflow">if</span> (!(m_dirCosR = radialDirectionCosine))
<a name="l00583"></a>00583         <span class="keywordflow">throw</span> <a class="code" href="classpandora_1_1StatusCodeException.html">StatusCodeException</a>(STATUS_CODE_INVALID_PARAMETER);
<a name="l00584"></a>00584 }
<a name="l00585"></a>00585 
<a name="l00586"></a>00586 <span class="comment">//------------------------------------------------------------------------------------------------------------------------------------------</span>
<a name="l00587"></a>00587 
<a name="l00588"></a><a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#6509415dd96f5d35de6e864597722be7">00588</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classpandora_1_1ClusterHelper_1_1ClusterFitResult.html#6509415dd96f5d35de6e864597722be7">ClusterHelper::ClusterFitResult::Reset</a>()
<a name="l00589"></a>00589 {
<a name="l00590"></a>00590     m_isFitSuccessful = <span class="keyword">false</span>;
<a name="l00591"></a>00591     m_direction.<a class="code" href="classpandora_1_1CartesianVector.html#ee99636956a8e86ae1e8aba317df2788">SetValues</a>(0.f, 0.f, 0.f);
<a name="l00592"></a>00592     m_intercept.<a class="code" href="classpandora_1_1CartesianVector.html#ee99636956a8e86ae1e8aba317df2788">SetValues</a>(0.f, 0.f, 0.f);
<a name="l00593"></a>00593     m_chi2.<a class="code" href="classpandora_1_1PandoraInputType.html#a770ff5b29bbee8797bae45ee49edcbe">Reset</a>();
<a name="l00594"></a>00594     m_rms.<a class="code" href="classpandora_1_1PandoraInputType.html#a770ff5b29bbee8797bae45ee49edcbe">Reset</a>();
<a name="l00595"></a>00595     m_dirCosR.<a class="code" href="classpandora_1_1PandoraInputType.html#a770ff5b29bbee8797bae45ee49edcbe">Reset</a>();
<a name="l00596"></a>00596 }
<a name="l00597"></a>00597 
<a name="l00598"></a>00598 } <span class="comment">// namespace pandora</span>
<a name="l00599"></a>00599 
<a name="l00600"></a>00600 <span class="preprocessor">#endif // #ifndef CLUSTER_HELPER_H</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Oct 9 18:30:41 2012 for PandoraPFANew by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
